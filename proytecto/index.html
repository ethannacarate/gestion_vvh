<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Sistema de Gesti√≥n - Liceo Comercial Vate Vicente Huidobro</title>
    <!-- Bootstrap 5 CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" />
    <!-- Font Awesome 6 -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" />
    <!-- Google Fonts: Inter + Playfair Display -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600&family=Playfair+Display:wght@700;800&display=swap" rel="stylesheet">
    <!-- Estilos personalizados -->
    <link rel="stylesheet" href="static/css/styles.css" />
</head>
<body>
    <!-- Navbar institucional -->
    <nav class="navbar navbar-expand-lg navbar-dark">
        <div class="container-fluid">
            <a class="navbar-brand" href="#">
                <i class="fas fa-graduation-cap me-2"></i>
                <span class="d-none d-md-inline">Liceo Comercial</span>
                <span class="d-block d-md-inline">Vate Vicente Huidobro</span>
            </a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav me-auto">
                    <li class="nav-item">
                        <a class="nav-link active" href="/">Inicio</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#" onclick="abrirModalArticulo('')">
                            <i class="fas fa-plus-circle me-1"></i> Nuevo Art√≠culo
                        </a>
                    </li>
                </ul>
            </div>
        </div>
    </nav>

    <!-- Vista de Login institucional -->
    <div id="login-view" class="view-login">
        <div class="login-box">
            <div class="text-center mb-4">
                <div class="logo-badge">
                    <i class="fas fa-laptop-code"></i>
                </div>
                <h1 class="institution-name">Liceo Comercial</h1>
                <h2 class="institution-subname">Vate Vicente Huidobro</h2>
                <p class="institution-motto">Formando Profesionales con Excelencia</p>
            </div>

            <div class="input-group mb-3">
                <label for="login-email">Correo Institucional</label>
                <div class="input-with-icon">
                    <i class="fas fa-envelope"></i>
                    <input type="email" id="login-email" class="form-control" placeholder="nombre@liceovvh.cl" required />
                </div>
            </div>

            <div class="input-group mb-4">
                <label for="login-password">Contrase√±a</label>
                <div class="input-with-icon">
                    <i class="fas fa-lock"></i>
                    <input type="password" id="login-password" class="form-control" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢" required />
                </div>
            </div>

            <p id="login-error-message" class="error-message hidden">Credenciales incorrectas.</p>

            <button type="button" class="btn btn-primary w-100" onclick="handleLogin()">
                <i class="fas fa-arrow-right me-2"></i>Acceder al Sistema
            </button>
            
            <div class="institution-footer mt-4">
                <p class="text-muted small">Sistema de Gesti√≥n Tecnol√≥gica | Antofagasta, Chile</p>
            </div>
        </div>
    </div>

    <!-- Vista Principal -->
    <div id="main-app-view" class="view-app hidden">
        <header class="mb-4">
            <div class="d-flex justify-content-between align-items-center flex-wrap gap-2">
                <div>
                    <h2><i class="fas fa-cubes me-2"></i>Gesti√≥n de Recursos Tecnol√≥gicos</h2>
                    <p class="text-muted mb-0">Liceo Comercial Vate Vicente Huidobro</p>
                </div>
                <button id="logout-button" type="button" class="btn btn-outline-secondary" onclick="logout()">
                    <i class="fas fa-sign-out-alt me-1"></i> Cerrar Sesi√≥n
                </button>
            </div>
        </header>

        <main>
            <!-- Secci√≥n: Pr√©stamo / Devoluci√≥n -->
            <section class="card mb-4">
                <div class="card-body">
                    <div class="section-header">
                        <h3 class="mb-0"><i class="fas fa-exchange-alt me-2"></i>Pr√©stamo de Equipos</h3>
                        <p class="text-muted mb-0">Escanea los c√≥digos para registrar un pr√©stamo</p>
                    </div>
                    
                    <div class="row g-3 mt-3">
                        <div class="col-md-6">
                            <label class="form-label">C√≥digo de Equipo Tecnol√≥gico</label>
                            <div class="input-with-icon">
                                <i class="fas fa-barcode"></i>
                                <input
                                    type="text"
                                    id="codigoArticulo"
                                    class="form-control form-control-lg"
                                    placeholder="Escanear equipo..."
                                    onchange="handleArticuloScan(this.value)"
                                />
                            </div>
                        </div>
                        <div class="col-md-6">
                            <label class="form-label">C√≥digo de Estudiante/Docente</label>
                            <div class="input-with-icon">
                                <i class="fas fa-id-card"></i>
                                <input
                                    type="text"
                                    id="codigoPersona"
                                    class="form-control form-control-lg"
                                    placeholder="Escanear credencial..."
                                    onchange="handlePersonScan(this.value)"
                                />
                            </div>
                        </div>
                    </div>

                    <div id="articulo-data" class="mt-4 p-3 bg-light rounded hidden">
                        <h5 class="mb-2">Equipo Tecnol√≥gico</h5>
                        <h6 class="mb-2">Nombre: <span id="nombreArticulo">---</span></h6>
                        <div class="d-flex gap-3">
                            <span class="badge bg-success">Disponible</span>
                            <span class="badge bg-info">Estado: <span id="estadoArticulo">Bueno</span></span>
                        </div>
                    </div>

                    <div id="persona-data" class="mt-3 p-3 bg-light rounded hidden">
                        <h5 class="mb-2">Usuario</h5>
                        <h6 class="mb-1">Nombre: <span id="nombrePersona">---</span></h6>
                        <p class="mb-0">Rol: <span id="rolPersona">---</span></p>
                    </div>

                    <button id="registrarBtn" type="button" class="btn btn-success mt-4 w-100 hidden" onclick="registrarPrestamo()">
                        <i class="fas fa-save me-2"></i>Registrar Pr√©stamo
                    </button>
                </div>
            </section>

            <!-- Historial -->
            <section class="card">
                <div class="card-body">
                    <div class="section-header">
                        <h3 class="mb-0"><i class="fas fa-history me-2"></i>Historial de Pr√©stamos</h3>
                        <p class="text-muted mb-0">√öltimos registros del sistema</p>
                    </div>
                    <div class="table-responsive mt-3">
                        <table class="table table-hover">
                            <thead>
                                <tr>
                                    <th>Fecha</th>
                                    <th>Equipo</th>
                                    <th>Usuario</th>
                                    <th>Estado</th>
                                </tr>
                            </thead>
                            <tbody id="historial-body"></tbody>
                        </table>
                    </div>
                </div>
            </section>
        </main>

        <footer class="text-center text-muted py-3 mt-4">
            <div class="institution-footer">
                <p class="mb-1"><strong>Liceo Comercial Vate Vicente Huidobro</strong></p>
                <p class="mb-1">Formando Profesionales con Excelencia desde Antofagasta</p>
                <p class="mb-0">¬© 2025 Sistema de Gesti√≥n Tecnol√≥gica | Todos los derechos reservados</p>
            </div>
        </footer>
    </div>

    <!-- Modal: Agregar Nuevo Art√≠culo -->
    <div class="modal fade" id="addArticleModal" tabindex="-1">
        <div class="modal-dialog modal-xl">
            <div class="modal-content">
                <div class="modal-header border-0 pb-0">
                    <div>
                        <h3 class="modal-title fw-bold">
                            <i class="fas fa-microchip me-2"></i>Nuevo Art√≠culo Tecnol√≥gico
                        </h3>
                        <p class="text-muted mb-0">Registro de equipos del Liceo Comercial Vate Vicente Huidobro</p>
                    </div>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body pt-0">
                    <!-- C√≥digo -->
                    <div class="mb-4">
                        <label class="form-label fw-semibold">C√≥digo de Barras Institucional</label>
                        <div class="input-with-icon">
                            <i class="fas fa-barcode"></i>
                            <input type="text" id="newArticleCode" class="form-control form-control-lg" readonly />
                        </div>
                    </div>

                    <!-- Categor√≠a -->
                    <div class="mb-4">
                        <label class="form-label fw-semibold">Categor√≠a del Equipo</label>
                        <p class="text-muted mb-3">Seleccione el tipo de equipo tecnol√≥gico</p>
                        <div class="d-flex flex-wrap gap-2">
                            <button type="button" class="btn category-btn" data-category="computadora">
                                üíª Computadora
                            </button>
                            <button type="button" class="btn category-btn" data-category="monitor">
                                üñ•Ô∏è Monitor
                            </button>
                            <button type="button" class="btn category-btn" data-category="periferico">
                                üéÆ Perif√©rico
                            </button>
                            <button type="button" class="btn category-btn" data-category="impresora">
                                üñ®Ô∏è Impresora
                            </button>
                            <button type="button" class="btn category-btn" data-category="tablet">
                                üì± Tablet
                            </button>
                            <button type="button" class="btn category-btn" data-category="red">
                                üåê Red
                            </button>
                        </div>
                    </div>

                    <!-- Formularios por categor√≠a (igual que antes, manteniendo la estructura existente) -->
                    <!-- COMPUTADORA -->
                    <div id="form-computadora" class="category-form hidden">
                        <div class="row g-3">
                            <div class="col-md-6">
                                <label>Tipo de Computadora</label>
                                <select class="form-select" id="pcTipo">
                                    <option value="">Seleccione</option>
                                    <option value="laptop">Laptop</option>
                                    <option value="desktop">Desktop</option>
                                    <option value="all-in-one">All-in-One</option>
                                    <option value="servidor">Servidor</option>
                                </select>
                            </div>
                            <div class="col-md-6">
                                <label>Marca</label>
                                <select class="form-select" id="pcMarca">
                                    <option value="">Seleccione</option>
                                    <option value="dell">Dell</option>
                                    <option value="hp">HP</option>
                                    <option value="lenovo">Lenovo</option>
                                    <option value="apple">Apple</option>
                                    <option value="asus">ASUS</option>
                                    <option value="acer">Acer</option>
                                    <option value="msi">MSI</option>
                                    <option value="razer">Razer</option>
                                </select>
                            </div>
                            <div class="col-md-6">
                                <label>Procesador</label>
                                <select class="form-select" id="pcProcesador">
                                    <option value="">Seleccione</option>
                                    <option value="intel-i3">Intel i3</option>
                                    <option value="intel-i5">Intel i5</option>
                                    <option value="intel-i7">Intel i7</option>
                                    <option value="intel-i9">Intel i9</option>
                                    <option value="amd-ryzen3">AMD Ryzen 3</option>
                                    <option value="amd-ryzen5">AMD Ryzen 5</option>
                                    <option value="amd-ryzen7">AMD Ryzen 7</option>
                                    <option value="amd-ryzen9">AMD Ryzen 9</option>
                                    <option value="apple-m1">Apple M1</option>
                                    <option value="apple-m2">Apple M2</option>
                                </select>
                            </div>
                            <div class="col-md-6">
                                <label>RAM</label>
                                <select class="form-select" id="pcRAM">
                                    <option value="">Seleccione</option>
                                    <option value="4GB">4 GB</option>
                                    <option value="8GB">8 GB</option>
                                    <option value="16GB">16 GB</option>
                                    <option value="32GB">32 GB</option>
                                    <option value="64GB">64 GB</option>
                                </select>
                            </div>
                            <div class="col-md-6">
                                <label>Almacenamiento</label>
                                <select class="form-select" id="pcAlmacenamiento">
                                    <option value="">Seleccione</option>
                                    <option value="256GB-SSD">256 GB SSD</option>
                                    <option value="512GB-SSD">512 GB SSD</option>
                                    <option value="1TB-SSD">1 TB SSD</option>
                                    <option value="1TB-HDD">1 TB HDD</option>
                                    <option value="2TB-HDD">2 TB HDD</option>
                                    <option value="512GB-SSD+1TB-HDD">512 GB SSD + 1 TB HDD</option>
                                </select>
                            </div>
                            <div class="col-md-6">
                                <label>Sistema Operativo</label>
                                <select class="form-select" id="pcSO">
                                    <option value="">Seleccione</option>
                                    <option value="windows11">Windows 11</option>
                                    <option value="windows10">Windows 10</option>
                                    <option value="macos">macOS</option>
                                    <option value="linux">Linux</option>
                                    <option value="sin-sistema">Sin sistema</option>
                                </select>
                            </div>
                            <div class="col-12">
                                <label>Estado F√≠sico del Equipo</label>
                                <div class="d-flex gap-3">
                                    <div class="form-check">
                                        <input class="form-check-input" type="radio" name="pcEstado" value="bueno" checked>
                                        <label class="form-check-label">Bueno</label>
                                    </div>
                                    <div class="form-check">
                                        <input class="form-check-input" type="radio" name="pcEstado" value="regular">
                                        <label class="form-check-label">Regular</label>
                                    </div>
                                    <div class="form-check">
                                        <input class="form-check-input" type="radio" name="pcEstado" value="malo">
                                        <label class="form-check-label">Malo</label>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- MONITOR -->
                    <div id="form-monitor" class="category-form hidden">
                        <div class="row g-3">
                            <div class="col-md-6">
                                <label>Marca del Monitor</label>
                                <select class="form-select" id="monitorMarca">
                                    <option value="">Seleccione</option>
                                    <option value="dell">Dell</option>
                                    <option value="hp">HP</option>
                                    <option value="lenovo">Lenovo</option>
                                    <option value="samsung">Samsung</option>
                                    <option value="lg">LG</option>
                                    <option value="acer">Acer</option>
                                    <option value="asus">ASUS</option>
                                </select>
                            </div>
                            <div class="col-md-6">
                                <label>Pulgadas</label>
                                <select class="form-select" id="monitorPulgadas">
                                    <option value="">Seleccione</option>
                                    <option value="19">19"</option>
                                    <option value="22">22"</option>
                                    <option value="24">24"</option>
                                    <option value="27">27"</option>
                                    <option value="32">32"</option>
                                </select>
                            </div>
                            <div class="col-12">
                                <label>Entradas Disponibles</label>
                                <div class="d-flex flex-wrap gap-3">
                                    <div class="form-check">
                                        <input class="form-check-input" type="checkbox" id="entradaHDMI">
                                        <label class="form-check-label">HDMI</label>
                                    </div>
                                    <div class="form-check">
                                        <input class="form-check-input" type="checkbox" id="entradaVGA">
                                        <label class="form-check-label">VGA</label>
                                    </div>
                                    <div class="form-check">
                                        <input class="form-check-input" type="checkbox" id="entradaDP">
                                        <label class="form-check-label">DisplayPort</label>
                                    </div>
                                    <div class="form-check">
                                        <input class="form-check-input" type="checkbox" id="entradaUSBC">
                                        <label class="form-check-label">USB-C</label>
                                    </div>
                                </div>
                            </div>
                            <div class="col-12">
                                <label>Estado F√≠sico del Monitor</label>
                                <div class="d-flex gap-3">
                                    <div class="form-check">
                                        <input class="form-check-input" type="radio" name="monitorEstado" value="bueno" checked>
                                        <label class="form-check-label">Bueno</label>
                                    </div>
                                    <div class="form-check">
                                        <input class="form-check-input" type="radio" name="monitorEstado" value="regular">
                                        <label class="form-check-label">Regular</label>
                                    </div>
                                    <div class="form-check">
                                        <input class="form-check-input" type="radio" name="monitorEstado" value="malo">
                                        <label class="form-check-label">Malo</label>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- PERIF√âRICO -->
                    <div id="form-periferico" class="category-form hidden">
                        <div class="row g-3">
                            <div class="col-md-6">
                                <label>Tipo de Perif√©rico</label>
                                <select class="form-select" id="perifericoTipo">
                                    <option value="">Seleccione</option>
                                    <option value="mouse">Mouse</option>
                                    <option value="teclado">Teclado</option>
                                    <option value="audifonos">Aud√≠fonos</option>
                                    <option value="webcam">Webcam</option>
                                    <option value="parlantes">Parlantes</option>
                                </select>
                            </div>
                            <div class="col-md-6">
                                <label>Marca</label>
                                <select class="form-select" id="perifericoMarca">
                                    <option value="">Seleccione</option>
                                    <option value="logitech">Logitech</option>
                                    <option value="razer">Razer</option>
                                    <option value="corsair">Corsair</option>
                                    <option value="steelseries">SteelSeries</option>
                                    <option value="hyperx">HyperX</option>
                                </select>
                            </div>
                            <div class="col-12">
                                <label>Estado F√≠sico del Perif√©rico</label>
                                <div class="d-flex gap-3">
                                    <div class="form-check">
                                        <input class="form-check-input" type="radio" name="perifericoEstado" value="bueno" checked>
                                        <label class="form-check-label">Bueno</label>
                                    </div>
                                    <div class="form-check">
                                        <input class="form-check-input" type="radio" name="perifericoEstado" value="regular">
                                        <label class="form-check-label">Regular</label>
                                    </div>
                                    <div class="form-check">
                                        <input class="form-check-input" type="radio" name="perifericoEstado" value="malo">
                                        <label class="form-check-label">Malo</label>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- IMPRESORA -->
                    <div id="form-impresora" class="category-form hidden">
                        <div class="row g-3">
                            <div class="col-md-6">
                                <label>Tipo de Impresora</label>
                                <select class="form-select" id="impresoraTipo">
                                    <option value="">Seleccione</option>
                                    <option value="laser">L√°ser</option>
                                    <option value="inyeccion">Inyecci√≥n</option>
                                    <option value="multifuncional">Multifuncional</option>
                                </select>
                            </div>
                            <div class="col-md-6">
                                <label>Marca</label>
                                <select class="form-select" id="impresoraMarca">
                                    <option value="">Seleccione</option>
                                    <option value="hp">HP</option>
                                    <option value="epson">Epson</option>
                                    <option value="canon">Canon</option>
                                    <option value="brother">Brother</option>
                                </select>
                            </div>
                            <div class="col-12">
                                <label>Estado F√≠sico de la Impresora</label>
                                <div class="d-flex gap-3">
                                    <div class="form-check">
                                        <input class="form-check-input" type="radio" name="impresoraEstado" value="bueno" checked>
                                        <label class="form-check-label">Bueno</label>
                                    </div>
                                    <div class="form-check">
                                        <input class="form-check-input" type="radio" name="impresoraEstado" value="regular">
                                        <label class="form-check-label">Regular</label>
                                    </div>
                                    <div class="form-check">
                                        <input class="form-check-input" type="radio" name="impresoraEstado" value="malo">
                                        <label class="form-check-label">Malo</label>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- TABLET -->
                    <div id="form-tablet" class="category-form hidden">
                        <div class="row g-3">
                            <div class="col-md-6">
                                <label>Tipo de Tablet</label>
                                <select class="form-select" id="tabletTipo">
                                    <option value="">Seleccione</option>
                                    <option value="ipad">iPad</option>
                                    <option value="android">Android</option>
                                    <option value="windows">Windows</option>
                                </select>
                            </div>
                            <div class="col-md-6">
                                <label>Marca</label>
                                <select class="form-select" id="tabletMarca">
                                    <option value="">Seleccione</option>
                                    <option value="apple">Apple</option>
                                    <option value="samsung">Samsung</option>
                                    <option value="huawei">Huawei</option>
                                    <option value="lenovo">Lenovo</option>
                                </select>
                            </div>
                            <div class="col-md-6">
                                <label>Almacenamiento</label>
                                <select class="form-select" id="tabletAlmacenamiento">
                                    <option value="">Seleccione</option>
                                    <option value="32GB">32 GB</option>
                                    <option value="64GB">64 GB</option>
                                    <option value="128GB">128 GB</option>
                                    <option value="256GB">256 GB</option>
                                </select>
                            </div>
                            <div class="col-md-6">
                                <label>RAM</label>
                                <select class="form-select" id="tabletRAM">
                                    <option value="">Seleccione</option>
                                    <option value="2GB">2 GB</option>
                                    <option value="3GB">3 GB</option>
                                    <option value="4GB">4 GB</option>
                                    <option value="6GB">6 GB</option>
                                </select>
                            </div>
                            <div class="col-12">
                                <label>Estado F√≠sico de la Tablet</label>
                                <div class="d-flex gap-3">
                                    <div class="form-check">
                                        <input class="form-check-input" type="radio" name="tabletEstado" value="bueno" checked>
                                        <label class="form-check-label">Bueno</label>
                                    </div>
                                    <div class="form-check">
                                        <input class="form-check-input" type="radio" name="tabletEstado" value="regular">
                                        <label class="form-check-label">Regular</label>
                                    </div>
                                    <div class="form-check">
                                        <input class="form-check-input" type="radio" name="tabletEstado" value="malo">
                                        <label class="form-check-label">Malo</label>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- RED -->
                    <div id="form-red" class="category-form hidden">
                        <div class="row g-3">
                            <div class="col-md-6">
                                <label>Tipo de Equipo de Red</label>
                                <select class="form-select" id="redTipo">
                                    <option value="">Seleccione</option>
                                    <option value="router">Router</option>
                                    <option value="switch">Switch</option>
                                    <option value="punto-acceso">Punto de Acceso</option>
                                </select>
                            </div>
                            <div class="col-md-6">
                                <label>Marca</label>
                                <select class="form-select" id="redMarca">
                                    <option value="">Seleccione</option>
                                    <option value="tp-link">TP-Link</option>
                                    <option value="netgear">Netgear</option>
                                    <option value="cisco">Cisco</option>
                                    <option value="huawei">Huawei</option>
                                </select>
                            </div>
                            <div class="col-12">
                                <label>Estado F√≠sico del Equipo</label>
                                <div class="d-flex gap-3">
                                    <div class="form-check">
                                        <input class="form-check-input" type="radio" name="redEstado" value="bueno" checked>
                                        <label class="form-check-label">Bueno</label>
                                    </div>
                                    <div class="form-check">
                                        <input class="form-check-input" type="radio" name="redEstado" value="regular">
                                        <label class="form-check-label">Regular</label>
                                    </div>
                                    <div class="form-check">
                                        <input class="form-check-input" type="radio" name="redEstado" value="malo">
                                        <label class="form-check-label">Malo</label>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="modal-footer border-0 pt-0">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancelar</button>
                    <button type="button" class="btn btn-primary" onclick="guardarNuevoArticulo()">
                        <i class="fas fa-save me-1"></i> Registrar Equipo
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    <!-- Script principal -->
    <script src="static/js/script.js"></script>
</body>
</html>